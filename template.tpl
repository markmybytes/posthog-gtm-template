___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "PostHog",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "PostHog event tracking integration. This template simplifies the event tracking setup.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "eventName",
    "displayName": "Event Name",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "Event Parameters",
    "displayName": "Event Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SELECT",
        "name": "eventParametersObject",
        "displayName": "Event Parameters Object",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "notSetText": "(not set)",
        "help": "Optional. Select a variable that returns an object of default event parameters. Any parameters set in the table below override keys from this object. Non-object values will be ignored."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "eventParameters",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Event Parameter",
            "name": "field",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "Advance Settings",
    "displayName": "Advance Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "GROUP",
        "name": "Retry",
        "displayName": "Retry",
        "groupStyle": "ZIPPY_OPEN",
        "subParams": [
          {
            "type": "TEXT",
            "name": "retryMax",
            "displayName": "Max Retries",
            "simpleValueType": true,
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "defaultValue": 0
          },
          {
            "type": "TEXT",
            "name": "retryInterval",
            "displayName": "Interval (ms)",
            "simpleValueType": true,
            "defaultValue": 300,
            "valueValidators": [
              {
                "type": "POSITIVE_NUMBER"
              }
            ]
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const callInWindow = require('callInWindow');
const copyFromWindow = require('copyFromWindow');
const callLater = require('callLater');
const log = require('logToConsole');
const queryPermission = require('queryPermission');
const Math = require('Math');
const makeNumber = require('makeNumber');
const makeString = require('makeString');
const getType = require('getType');

/**
 * Safely convert input to integer
 */
function toInt(value, fallback) {
  var n = makeNumber(value);
  return n === n ? n : fallback; // NaN check
}

/**
 * Build PostHog properties object from SIMPLE_TABLE rows
 */
function buildProperties(rows) {
  var props = {};
  if (rows && getType(rows) === 'array') {
    for (var i = 0; i < rows.length; i++) {
      var row = rows[i] || {};
      var key = row.field;
      if (key && typeof key === 'string') {
        props[key] = row.value;
      }
    }
  }
  return props;
}

/**
 * Normalize the "Event Parameters Object" selection into an object.
 * - "(not set)" => {}
 * - Only object values are allowed.
 * - Any non-object (string/number/array/etc.) is ignored => {}
 */
function normalizeParamsObject(value) {
  if (!value || value === '(not set)') {
    return {};
  }
  return getType(value) === 'object' ? value : {};
}

/**
 * Merge base object params with SIMPLE_TABLE params (table has precedence).
 * Manual values override, including empty string "".
 */
function buildMergedProperties(objectValue, rows) {
  var base = normalizeParamsObject(objectValue);
  var props = {};

  // Shallow copy base object keys
  for (var k in base) {
    props[k] = base[k];
  }

  // Overlay manual params (higher precedence)
  var manual = buildProperties(rows);
  for (var m in manual) {
    props[m] = manual[m];
  }

  return props;
}


/**
 * Check if PostHog is available
 */
function hasPosthog() {
  return !!copyFromWindow('posthog.capture');
}

/**
 * Resolve inputs
 */
var eventName = makeString(data.eventName || 'gtm_event');

var retryMax = Math.max(0, toInt(data.retryMax, 0));
var retryInterval = Math.max(0, toInt(data.retryInterval, 300));

/**
 * Permission check
 */
var canExecute = queryPermission(
  'access_globals',
  'execute',
  'posthog.capture'
);

/**
 * Attempt execution (with retry support)
 */
function attempt(attemptIndex) {
  attemptIndex = attemptIndex || 0;

  if (!canExecute) {
    log('Permission denied: posthog.capture');
    return data.gtmOnFailure(
      'Missing permission: execute window.posthog.capture'
    );
  }

  if (!hasPosthog()) {
    if (attemptIndex < retryMax) {
      return callLater(function () {
        attempt(attemptIndex + 1);
      }, retryInterval);
    }

    log('window.posthog not available');
    return data.gtmOnFailure(
      'window.posthog not found. Ensure PostHog is initialized before this tag.'
    );
  }

  var result = callInWindow(
    'posthog.capture',
    eventName,
    buildMergedProperties(data.eventParametersObject, data.eventParameters)
  );
  
  log(result);

  if (typeof result === 'undefined') {
    if (attemptIndex < retryMax) {
      return callLater(function () {
        attempt(attemptIndex + 1);
      }, retryInterval);
    }

    log('posthog.capture not callable');
    return data.gtmOnFailure(
      'posthog.capture not callable (missing or not a function)'
    );
  }

  data.gtmOnSuccess();
}

// Start execution
attempt(0);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "posthog.capture"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Happy path
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', (path) => (path === 'posthog' ? {} : undefined));
    mock('callInWindow', (path, evtName, props) => {
      assertThat(path).isEqualTo('posthog.capture');
      assertThat(evtName).isEqualTo('Order Placed');
      assertThat(props).isEqualTo({ price: '9.99', plan: 'pro' });
      return true;
    });

    runCode({
      eventName: 'Order Placed',
      eventParameters: [
        { field: 'price', value: '9.99' },
        { field: 'plan',  value: 'pro' }
      ]
    });

    assertApi('callInWindow').wasCalled();
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Calls with default values
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', (path) => (path === 'posthog' ? {} : undefined));
    mock('callInWindow', (path, evtName, props) => {
      assertThat(evtName).isEqualTo('gtm_event');
      assertThat(props).isEqualTo({});
      return true;
    });

    runCode({});

    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Non-string eventName
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', () => ({}));
    mock('callInWindow', (path, evtName) => {
      assertThat(evtName).isEqualTo('42'); // coerced to string
      return true;
    });

    runCode({ eventName: 42 });

    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Empty or invalid event parameter keys
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', () => ({}));
    mock('callInWindow', (path, evtName, props) => {
      assertThat(props).isEqualTo({ a: 1, b: 'x' });
      return true;
    });

    runCode({
      eventName: 'X',
      eventParameters: [
        { field: 'a', value: 1 },
        { field: '',  value: 'drop' },
        { field: null, value: 'drop' },
        { field: 'b', value: 'x' }
      ]
    });

    assertApi('gtmOnSuccess').wasCalled();
- name: Permission denied
  code: |-
    mock('queryPermission', () => false);
    // Even if posthog exists, we should fail before checking it.
    mock('copyFromWindow', () => ({}));

    runCode({ eventName: 'Denied' });

    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: Posthog missing and no retries
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', () => undefined);

    runCode({ retryMax: 0, retryInterval: 0 });

    assertApi('callLater').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: Retry until Posthog appears
  code: |-
    // Make callLater synchronous and count attempts.
    let attempts = 0;
    mock('queryPermission', () => true);
    mock('copyFromWindow', (path) => {
      if (path !== 'posthog') return undefined;
      // First attempt: missing; second attempt: present.
      return attempts >= 1 ? {} : undefined;
    });
    mock('callLater', (fn, ms) => { attempts++; fn(); });
    mock('callInWindow', () => true);

    runCode({ eventName: 'with_retry', retryMax: 3, retryInterval: 0 });

    assertThat(attempts).isGreaterThan(0);
    assertApi('callInWindow').wasCalled();
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Retry exhausted
  code: |-
    let scheduled = 0;
    mock('queryPermission', () => true);
    mock('copyFromWindow', () => undefined);
    mock('callLater', (fn, ms) => { scheduled++; fn(); });

    runCode({ eventName: 'exhaust', retryMax: 2, retryInterval: 0 });

    assertThat(scheduled).isEqualTo(2);
    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: Capture returns undefined and no retries
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', () => ({}));
    mock('callInWindow', () => undefined);

    runCode({ eventName: 'no_retry', retryMax: 0 });

    assertApi('gtmOnFailure').wasCalled();
- name: Capture returns undefined and retries
  code: |-
    let retries = 0;
    mock('queryPermission', () => true);
    mock('copyFromWindow', () => ({}));
    mock('callInWindow', () => undefined);
    mock('callLater', (fn, ms) => { retries++; fn(); });

    runCode({ eventName: 'retry_but_undefined', retryMax: 2, retryInterval: 0 });

    assertThat(retries).isEqualTo(2);
    assertApi('gtmOnFailure').wasCalled();
- name: Event Parameters Object merges with table (table wins)
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', (path) => (path === 'posthog' ? {} : undefined));
    mock('callInWindow', (path, evtName, props) => {
      assertThat(path).isEqualTo('posthog.capture');
      assertThat(evtName).isEqualTo('Merge Test');
      assertThat(props).isEqualTo({
        a: 'fromObject',
        b: 'fromTable',   // overridden by table
        c: 3,
        d: 'newFromTable'
      });
      return true;
    });

    runCode({
      eventName: 'Merge Test',
      eventParametersObject: { a: 'fromObject', b: 'fromObject', c: 3 },
      eventParameters: [
        { field: 'b', value: 'fromTable' },
        { field: 'd', value: 'newFromTable' }
      ]
    });

    assertApi('callInWindow').wasCalled();
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Manual empty string overrides object value
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', (path) => (path === 'posthog' ? {} : undefined));
    mock('callInWindow', (path, evtName, props) => {
      assertThat(evtName).isEqualTo('Empty Override Test');
      assertThat(props).isEqualTo({ key1: '' });
      return true;
    });

    runCode({
      eventName: 'Empty Override Test',
      eventParametersObject: { key1: 'fromObject' },
      eventParameters: [
        { field: 'key1', value: '' }
      ]
    });

    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
- name: Non-object Event Parameters Object is ignored
  code: |-
    mock('queryPermission', () => true);
    mock('copyFromWindow', (path) => (path === 'posthog' ? {} : undefined));
    mock('callInWindow', (path, evtName, props) => {
      assertThat(evtName).isEqualTo('Ignore Non Object');
      // objectValue is ignored, only manual table applies
      assertThat(props).isEqualTo({ a: 'fromTable' });
      return true;
    });

    runCode({
      eventName: 'Ignore Non Object',
      eventParametersObject: 'not-an-object',
      eventParameters: [
        { field: 'a', value: 'fromTable' }
      ]
    });

    assertApi('gtmOnSuccess').wasCalled();
    assertApi('gtmOnFailure').wasNotCalled();
setup: ''


___NOTES___

Created on 2026/1/29 下午5:54:15


